---
import MenuIcon from "./icons/MenuIcon.astro";
---

<nav
  id="navbar"
  class="fixed w-full px-4 md:px-24 backdrop-blur-md z-10 shadow-lg"
>
  <div class="max-w-screen-2xl mx-auto flex flex-col">
    <div class="h-20 grow flex justify-between items-center">
      <a
        href="/#hero"
        class="text-xl font-normal tracking-tight p-2 rounded-md outline-gray-500 -translate-x-2"
        >Rastislav Hepner</a
      >
      <button id="menu-toggle" class="p-4 md:hidden">
        <MenuIcon class="text-red-500" width={32} height={32} />
      </button>
      <menu class="hidden md:flex">
        <a class="block p-2 rounded-md outline-gray-500" href="/#story">Story</a
        >
        <a class="block p-2 rounded-md outline-gray-500" href="/#toolkit"
          >Toolkit</a
        >
        <a class="block p-2 rounded-md outline-gray-500" href="/#projects"
          >Projects</a
        >
        <a class="block p-2 rounded-md outline-gray-500" href="#contact"
          >Contact</a
        >
      </menu>
    </div>
    <menu id="menu-mobile" class="hidden md:hidden pb-4">
      <a class="block py-4 outline-gray-500" href="/#story">Story</a>
      <a class="block py-4 outline-gray-500" href="/#toolkit">Toolkit</a>
      <a class="block py-4 outline-gray-500" href="/#projects">Projects</a>
      <a class="block py-4 outline-gray-500" href="#contact">Contact</a>
    </menu>
  </div>
</nav>

<script>
  const navbar = document.getElementById("navbar");
  const menuToggle = document.getElementById("menu-toggle");
  const menuMobile = document.getElementById("menu-mobile");

  menuToggle?.addEventListener("click", () => {
    menuMobile?.classList.toggle("hidden");
  });

  menuMobile?.addEventListener("click", (event) => {
    if (event.target instanceof HTMLAnchorElement) {
      menuMobile?.classList.toggle("hidden");
    }
  });

  window.addEventListener("click", (event) => {
    if (!navbar || !menuMobile) return;

    const isInside = navbar.contains(event.target as Node);
    if (!isInside) {
      menuMobile.classList.add("hidden");
    }
  });
</script>
