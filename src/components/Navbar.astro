---
import menuIcon from "../assets/menu.svg";
import { Image } from "astro:assets";
---

<nav
  id="navbar"
  class="fixed flex flex-col justify-center px-4 md:px-24 w-full bg-white/70 backdrop-blur-lg"
>
  <div class="h-20 grow flex justify-between items-center max-w-screen-2xl">
    <span class="text-base font-black">Rastislav Hepner.</span>

    <button id="menu-toggle" class="p-4 md:hidden">
      <Image src={menuIcon} alt="Menu icon" width={32} height={32} />
    </button>

    <menu class="hidden md:flex">
      <a class="block p-2" href="/#about">About me</a>
      <a class="block p-2" href="/#projects">Projects</a>
      <a class="block p-2" href="/#contact">Contact</a>
    </menu>
  </div>

  <menu id="menu-mobile" class="hidden md:hidden pb-4">
    <a class="block py-4" href="/#about">About me</a>
    <a class="block py-4" href="/#projects">Projects</a>
    <a class="block py-4" href="/#contact">Contact</a>
  </menu>
</nav>

<script>
  const navbar = document.getElementById("navbar");
  const menuToggle = document.getElementById("menu-toggle");
  const menuMobile = document.getElementById("menu-mobile");

  menuToggle?.addEventListener("click", () => {
    menuMobile?.classList.toggle("hidden");
  });

  menuMobile?.addEventListener("click", (event) => {
    if (event.target instanceof HTMLAnchorElement) {
      menuMobile?.classList.toggle("hidden");
    }
  });

  window.addEventListener("click", (event) => {
    if (!navbar || !menuMobile) return;

    const isInside = navbar.contains(event.target as Node);
    if (!isInside) {
      menuMobile.classList.add("hidden");
    }
  });
</script>
