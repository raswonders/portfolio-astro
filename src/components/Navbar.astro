---
import menuIcon from "../assets/menu.svg";
import { Image } from "astro:assets";
---

<nav id="navbar" class="fixed px-4 w-full bg-white/70 backdrop-blur-lg">
  <div class="h-20 flex justify-between items-center">
    <span class="text-base font-black">Rastislav Hepner.</span>

    <button id="menu-toggle" class="p-4 md:hidden">
      <Image src={menuIcon} alt="Menu icon" width={32} height={32} />
    </button>

    <menu class="hidden md:flex">
      <li><a class="block p-2" href="#about">About me</a></li>
      <li><a class="block p-2" href="#projects">Projects</a></li>
      <li><a class="block p-2" href="#contact">Contact</a></li>
    </menu>
  </div>

  <menu id="menu-content" class="hidden md:hidden space-y-2">
    <li><a class="block p-2" href="#">Home</a></li>
    <li><a class="block p-2" href="#">About me</a></li>
    <li><a class="block p-2" href="#">Contact</a></li>
  </menu>
</nav>

<script>
  const navbar = document.getElementById("navbar");
  const menuToggle = document.getElementById("menu-toggle");
  const menuContent = document.getElementById("menu-content");

  menuToggle?.addEventListener("click", () => {
    menuContent?.classList.toggle("hidden");
  });

  window.addEventListener("click", (event) => {
    if (!navbar || !menuContent) return;

    const isInside = navbar.contains(event.target as Node);
    if (!isInside) {
      menuContent.classList.add("hidden");
    }
  });
</script>
